<view class="page">
  <view class="page-body">
    <!-- 加载 / 错误提示 -->
    <view wx:if="{{loading}}" class="tip-text">
      加载中…
    </view>

    <view wx:if="{{!loading && errorMsg}}" class="tip-text tip-error">
      {{errorMsg}}
    </view>

    <!-- 课程信息 -->
    <view wx:if="{{!loading && !errorMsg && course}}" class="course-card">
      <view class="course-title">
        {{course.title}}
      </view>

      <view class="tags-row">
        <view class="tag type-tag">{{course.courseTypeText}}</view>
        <view class="tag price-tag">{{course.priceText}}</view>
        <view class="tag status-tag">{{course.statusText}}</view>
      </view>

      <view class="meta-row">
        <text class="meta-label">时间</text>
        <text class="meta-value">{{course.timeText}}</text>
      </view>

      <view class="meta-row">
        <text class="meta-label">形式</text>
        <text class="meta-value">{{course.modeText}}</text>
      </view>

      <view class="meta-row">
        <text class="meta-label">适合人群</text>
        <text class="meta-value">{{course.targetText}}</text>
      </view>

      <view class="section">
        <view class="section-title">课程简介</view>
        <view class="section-content">
          <text>
            {{course.description || '讲师会结合你的真实交易问题进行拆解与演示，帮助你搭建自己的风控护栏。'}}
          </text>
        </view>
      </view>

      <!-- 新增：控局路径位置说明 -->
      <view class="section">
        <view class="section-title">这门课在控局路径中的位置</view>
        <view class="section-content">
          <view class="path-title">
            {{course.pathStageTitle}}
          </view>
          <view class="path-desc">
            {{course.pathStageDesc}}
          </view>
          <view class="path-next">
            下一步建议：{{course.pathNextStep}}
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- 底部操作栏 -->
  <view wx:if="{{!loading && course}}" class="bottom-bar">
    <button class="btn-secondary" bindtap="goProgress">
      查看我的课程进度
    </button>
    <button class="btn-primary" bindtap="onJoinCourse">
      加入我的课程进度
    </button>
  </view>
</view>
