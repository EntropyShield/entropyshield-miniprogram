<view class="page">

<view class="card intro-card">
  <view class="intro-title">亏损危险等级评估</view>
  <view class="intro-sub">
    从仓位、止损习惯和亏损处理方式，评估你当前的整体危险等级。
  </view>
  <view class="intro-meta">
    共 {{questions.length}} 题 · 已答 {{answeredCount}} 题
  </view>
</view>

<block wx:for="{{questions}}" wx:for-item="q" wx:for-index="qIndex" wx:key="qIndex">
  <view class="card question-card">
    <view class="question-title">第 {{qIndex + 1}} 题 · {{q.title}}</view>
    <view class="options">
      <block wx:for="{{q.options}}" wx:for-item="opt" wx:key="value">
        <view
          class="option-item {{q.activeValue === opt.value ? 'active' : ''}}"
          bindtap="onSelectOption"
          data-qindex="{{qIndex}}"
          data-value="{{opt.value}}"
        >
          <view class="option-dot"></view>
          <view class="option-text">
            <text class="option-title">{{opt.label}}</text>
          </view>
        </view>
      </block>
    </view>
  </view>
</block>

<view class="card footer-bar">
  <button
    class="btn-submit"
    bindtap="onSubmit"
    disabled="{{answeredCount < questions.length}}"
  >
    生成我的亏损危险等级
  </button>
  <view class="footer-progress">
    已完成 {{answeredCount}} / {{questions.length}} 题
  </view>
</view>

</view>
