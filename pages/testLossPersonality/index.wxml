<view class="page">

<!-- 顶部说明 -->
<view class="card intro-card">
  <view class="intro-title">亏损人格测试</view>
  <view class="intro-sub">
    看看你在亏损时，更像“理性控盘者”还是“情绪型赌徒”。
  </view>
  <view class="intro-meta">
    共 {{questions.length}} 题 · 已答 {{answeredCount}} 题
  </view>
</view>

<!-- 题目列表 -->
<block wx:for="{{questions}}" wx:for-item="q" wx:for-index="qIndex" wx:key="qIndex">
  <view class="card question-card">
    <view class="question-title">
      第 {{qIndex + 1}} 题 · {{q.title}}
    </view>

    <view class="options">
      <block wx:for="{{q.options}}" wx:for-item="opt" wx:key="value">
        <view
          class="option-item {{q.activeValue === opt.value ? 'active' : ''}}"
          bindtap="onSelectOption"
          data-qindex="{{qIndex}}"
          data-value="{{opt.value}}"
        >
          <view class="option-dot"></view>
          <view class="option-text">
            <text class="option-title">{{opt.label}}</text>
          </view>
        </view>
      </block>
    </view>
  </view>
</block>

<!-- 底部提交 -->
<view class="card footer-bar">
  <button
    class="btn-submit"
    bindtap="onSubmit"
    disabled="{{answeredCount < questions.length}}"
  >
    生成我的亏损人格诊断
  </button>
  <view class="footer-progress">
    已完成 {{answeredCount}} / {{questions.length}} 题
  </view>
</view>

</view>
